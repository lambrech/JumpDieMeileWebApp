<style>
    .display-none {
        display: none;
    }
</style>

<div class="@(this.RegistrationDone ? "display-none" : "")" style="width: 360px;">
    <EditForm EditContext="@this.CurrentEditContext"  OnValidSubmit="this.HandleValidSubmit">
        <DataAnnotationsValidator />
        <MudCard Outlined="true" Elevation="4">
            <MudCardHeader>
                <CardHeaderContent>
                    <MudText Typo="Typo.h6">Neuen Läufer anmelden</MudText>
                </CardHeaderContent>
            </MudCardHeader>
            <MudCardContent>
                <MudTextField Class="my-2" Label="Vorname" @bind-Value="this.NewRunner.FirstName" For="@(() => this.NewRunner.FirstName)" Variant="Variant.Outlined"/>
                <MudTextField Class="my-2" Label="Nachname" @bind-Value="this.NewRunner.LastName" For="@(() => this.NewRunner.LastName)" Variant="Variant.Outlined"/>
                <MudTextField Class="my-2" Label="Nutzername" @bind-Value="this.NewRunner.Username" For="@(() => this.NewRunner.Username)" ErrorText="@this.CurrentUserNameErrorText()"
                              Variant="Variant.Outlined" Immediate="true"/>
                <MudTextField Class="my-2" Label="Email" @bind-Value="this.NewRunner.Email" For="@(() => this.NewRunner.Email)" Variant="Variant.Outlined"/>
            </MudCardContent>
            <MudCardActions>
                <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Outlined" Color="Color.Primary" Class="ml-auto ma-2">Registrieren</MudButton>
            </MudCardActions>
        </MudCard>
    </EditForm>
</div>

<div class="@(!this.RegistrationDone ? "display-none" : "")" style="width: 360px;">
    
    <MudCard Outlined="true" Elevation="4">
        <MudCardHeader>
            <CardHeaderContent>
                <MudText Typo="Typo.h6">Danke für deine Anmeldung.<br />Viel Spaß beim Laufen.</MudText>
            </CardHeaderContent>
        </MudCardHeader>
        <MudCardContent>
            <MudTextField ReadOnly="true" Class="my-4" Label="Vollständiger Anzeigename" Value="this.RegisteredRunner?.FullDisplayName" Variant="Variant.Outlined"
                          HelperText="Die Zeichenkette nach deinem Nutzernamen sind die ersten Zeichen deiner eindeutigen ID. Falls jemand durch einen technischen Fehler den gleichen Nutzernamen erstellen konnte wie du, hilft diese ID bei der Unterscheidung" />
            <MudTextField ReadOnly="true" Class="my-4" Label="Vorname" Value="this.RegisteredRunner?.FirstName"  Variant="Variant.Outlined"/>
            <MudTextField ReadOnly="true" Class="my-4" Label="Nachname" Value="this.RegisteredRunner?.LastName"  Variant="Variant.Outlined"/>
            <MudTextField ReadOnly="true" Class="my-4" Label="Nutzername" Value="this.RegisteredRunner?.Username" Variant="Variant.Outlined" />
            <MudTextField ReadOnly="true" Class="my-4" Label="Email" Value="this.RegisteredRunner?.Email" Variant="Variant.Outlined"/>
        </MudCardContent>
        <MudCardActions>
            <MudButton  Class="ma-4" OnClick="@(async () => { await this.OnInitializedAsync(); this.StateHasChanged(); })" Variant="Variant.Outlined">Weiteren Läufer melden</MudButton>
            <MudButton  Class="ma-4" OnClick="@(async () => { this.NavigationManager.NavigateTo(this.NavigationManager.CreateRoute(PageRoutes.RegisterRunRoute)); })"
                       Variant="Variant.Outlined">Einen Lauf eintragen</MudButton>
        </MudCardActions>
    </MudCard>
    
</div>
